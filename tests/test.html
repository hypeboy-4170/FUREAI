<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUREAI ãƒ†ã‚¹ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: #333; margin-bottom: 30px; }
        .card { background: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .card h2 { color: #555; margin-bottom: 15px; font-size: 20px; }
        .card p { color: #666; margin-bottom: 10px; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 14px; margin: 5px 0; display: block; width: 100%; }
        button:hover { background: #0056b3; }
        .test-step { margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px; }
        .step-desc { margin: 10px 0 0 0; color: #666; font-size: 13px; line-height: 1.5; }
        .result { margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 5px; border-left: 4px solid #007bff; display: none; }
        .loading { color: #666; }
        .success { color: #28a745; }
        .mock { color: #ffc107; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤ FUREAI ãƒ†ã‚¹ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
        
        <div class="card">
            <h2>ğŸ› ï¸ æ®µéšçš„ãƒ†ã‚¹ãƒˆ</h2>
            <p>å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’é †ç•ªã«ãƒ†ã‚¹ãƒˆ</p>
            
            <div class="test-step">
                <button onclick="runTest(1)">1. Alexaã‚¹ã‚­ãƒ«ãƒ†ã‚¹ãƒˆ</button>
                <p class="step-desc">ğŸ“ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®éŸ³å£°å…¥åŠ›ã‚’AlexaãŒå—ã‘å–ã‚Šã€ã‚¤ãƒ³ãƒ†ãƒ³ãƒˆæƒ…å ±ã«å¤‰æ›</p>
                <div id="test-result-1" class="result"></div>
            </div>
            
            <div class="test-step">
                <button onclick="runTest(2)">2. Lambdaå®Ÿè¡Œãƒ†ã‚¹ãƒˆ</button>
                <p class="step-desc">ğŸ“ Alexaã‹ã‚‰Lambdaé–¢æ•°ã‚’å‘¼ã³å‡ºã—ã€åŸºæœ¬çš„ãªå¿œç­”ã‚’ç¢ºèª</p>
                <div id="test-result-2" class="result"></div>
            </div>
            
            <div class="test-step">
                <button onclick="runTest(3)">3. BedrockåŸºæœ¬ãƒ†ã‚¹ãƒˆ</button>
                <p class="step-desc">ğŸ“ Bedrock AIã«ç°¡å˜ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ä¿¡ã—ã€ã‚³ãƒ¼ãƒ‡ææ¡ˆã‚’å–å¾—</p>
                <div id="test-result-3" class="result"></div>
            </div>
            
            <div class="test-step">
                <button onclick="runTest(4)">4. Bedrock+å¤©æ°—</button>
                <p class="step-desc">ğŸ“ å¤©æ°—æƒ…å ±ï¼ˆæ™´ã‚Œ26åº¦ï¼‰ã‚’åŠ å‘³ã—ãŸã‚³ãƒ¼ãƒ‡ææ¡ˆã‚’AIã«ä¾é ¼</p>
                <div id="test-result-4" class="result"></div>
            </div>
            
            <div class="test-step">
                <button onclick="runTest(5)">5. Bedrock+å¤©æ°—+äºˆå®š</button>
                <p class="step-desc">ğŸ“ å¤©æ°—+äºˆå®šï¼ˆä¼šè­°14:00ï¼‰ã‚’åŠ å‘³ã—ãŸãƒ•ã‚©ãƒ¼ãƒãƒ«ãªã‚³ãƒ¼ãƒ‡ææ¡ˆ</p>
                <div id="test-result-5" class="result"></div>
            </div>
            
            <div class="test-step">
                <button onclick="runTest(6)">6. Bedrock+å…¨ãƒ‡ãƒ¼ã‚¿</button>
                <p class="step-desc">ğŸ“ S3ç”»åƒURL+DBã®æœãƒ‡ãƒ¼ã‚¿ï¼ˆã‚«ãƒ†ã‚´ãƒªãƒ»è‰²ãƒ»ã‚¿ã‚°ï¼‰ã‚’å…¨ã¦åŠ å‘³</p>
                <div id="test-result-6" class="result"></div>
            </div>
            
            <div class="test-step">
                <button onclick="runTest(7)">7. ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ</button>
                <p class="step-desc">ğŸ“ Alexaâ†’Lambdaâ†’å„APIâ†’Bedrockâ†’å¿œç­”ã®å…¨ãƒ•ãƒ­ãƒ¼çµ±åˆãƒ†ã‚¹ãƒˆ</p>
                <div id="test-result-7" class="result"></div>
            </div>
        </div>
    </div>

    <script>
        async function runTest(step) {
            const result = document.getElementById(`test-result-${step}`);
            result.style.display = 'block';
            
            const stepNames = {
                1: 'Alexaã‚¹ã‚­ãƒ«',
                2: 'Lambdaå®Ÿè¡Œ',
                3: 'BedrockåŸºæœ¬',
                4: 'Bedrock+å¤©æ°—',
                5: 'Bedrock+å¤©æ°—+äºˆå®š',
                6: 'Bedrock+å…¨ãƒ‡ãƒ¼ã‚¿',
                7: 'ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ'
            };
            
            result.innerHTML = `<p class="loading">â³ ${stepNames[step]}å®Ÿè¡Œä¸­...</p>`;
            
            try {
                const res = await fetch(`/api/test/${step}`);
                const data = await res.json();
                
                let explanation = '';
                if (step === 1) explanation = 'âœ… AlexaãŒãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’æ­£ã—ãã‚¤ãƒ³ãƒ†ãƒ³ãƒˆæƒ…å ±ã«å¤‰æ›ã—ã¾ã—ãŸ';
                else if (step === 2) explanation = 'âœ… Lambdaé–¢æ•°ãŒæ­£å¸¸ã«å®Ÿè¡Œã•ã‚Œã€å¤©æ°—ãƒ»äºˆå®šãƒ»æœãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã—ãŸ';
                else if (step === 3) explanation = 'âœ… Bedrock AIãŒåŸºæœ¬çš„ãªã‚³ãƒ¼ãƒ‡ææ¡ˆã‚’ç”Ÿæˆã—ã¾ã—ãŸ';
                else if (step === 4) explanation = 'âœ… å¤©æ°—æƒ…å ±ã‚’è€ƒæ…®ã—ãŸã‚³ãƒ¼ãƒ‡ææ¡ˆãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸ';
                else if (step === 5) explanation = 'âœ… å¤©æ°—ã¨äºˆå®šã®ä¸¡æ–¹ã‚’è€ƒæ…®ã—ãŸãƒ•ã‚©ãƒ¼ãƒãƒ«ãªã‚³ãƒ¼ãƒ‡ãŒææ¡ˆã•ã‚Œã¾ã—ãŸ';
                else if (step === 6) explanation = 'âœ… S3ç”»åƒã¨DBãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦åŠ å‘³ã—ãŸæœ€é©ãªã‚³ãƒ¼ãƒ‡ãŒææ¡ˆã•ã‚Œã¾ã—ãŸ';
                else if (step === 7) explanation = 'âœ… å…¨ã‚·ã‚¹ãƒ†ãƒ ãŒé€£æºã—ã¦æ­£å¸¸ã«å‹•ä½œã—ã¾ã—ãŸ';
                
                result.innerHTML = `
                    <p class="success">${explanation}</p>
                    <details>
                        <summary style="cursor: pointer; margin-top: 10px; color: #007bff;">ğŸ“Š è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º</summary>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    </details>
                `;
            } catch (e) {
                result.innerHTML = `<p>âŒ ã‚¨ãƒ©ãƒ¼: ${e.message}</p>`;
            }
        }
    </script>
</body>
</html>
